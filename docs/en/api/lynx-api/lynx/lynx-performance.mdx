---
title: performance
---

# lynx: performance readonly object

This object provides access to performance metrics related to the current page.

## Instance Methods

### createObserver()

Creates a [`PerformanceObserver`](/api/lynx-api/performance-api/performance-observer) object that will be used to receive performance events generated by Lynx engine.

#### Syntax

```ts
createObserver(callback: PerformanceCallback): PerformanceObserver;
```

#### Parameters

##### callback

A callback function that handles performance events, defined as `type PerformanceCallback = (entry: PerformanceEntry) => void`. The entry is a subclass of [PerformanceEntry](/api/lynx-api/performance-api/performance-entry).

This callback is triggered when the [PerformanceObserver](/api/lynx-api/performance-api/performance-observer) receives a performance event.

#### Return Value

A `PerformanceObserver` object.

#### Examples

The following example creates a `PerformanceObserver` watching for [`metric.fcp`](/api/lynx-api/performance-api/performance-entry/metric-fcp-entry) and [`pipeline`](/api/lynx-api/performance-api/performance-entry/pipeline-entry) entries.

import { Go } from '@lynx';

<Go
  example="performance-api"
  defaultFile="src/simple_observe/index.tsx"
  defaultEntryFile="dist/SimpleObseve.lynx.bundle"
  img="https://lf-lynx.tiktok-cdns.com/obj/lynx-artifacts-oss-sg/lynx-website/assets/doc/simple-observe-demo.jpeg"
  entry="src/simple_observe"
  highlight="{11-21,31}"
/>

### profileStart()

Marks the start of a [trace event](https://perfetto.dev/docs/instrumentation/track-events).

#### Syntax

```typescript
profileStart(name: string, option?: { flowId: number, arg?:  Record<string, string>}): void;
```

#### Parameters

##### name

The name of the trace event.

##### option(optional)

Additional options such as `flowId` and custom arguments.

#### Examples

```typescript
// Start a trace event with only a name
lynx.performance.profileStart('DataFetch');

// Start a trace event with custom arguments
lynx.performance.profileStart('DataFetch', {
  args: { url: 'https://api.example.com/data', method: 'GET' },
});

// Start a trace event with a flow id
const flowId = lynx.performance.profileFlowId();
lynx.performance.profileStart('UserAction', { flowId });

// Start a duration event with both arguments and flow ID
lynx.performance.profileStart('ComplexProcess', {
  args: { step: 'start' },
  flowId,
});
```

### profileEnd()

Marks the end of the most recent [trace event](https://perfetto.dev/docs/instrumentation/track-events).

#### Syntax

```typescript
profileEnd(): void;
```

#### Examples

```typescript
// End the most recent duration event
lynx.performance.profileEnd();
```

### profileMark()

Marks an instant(point-in-time) event.

#### Syntax

```typescript
profileMark(name: string, option?: { flowId: number, arg?:  Record<string, string>}): void;
```

#### Parameters

##### name

The name of the instant event.

##### option(optional)

Additional options such as `flowId` and custom arguments.

#### Examples

```typescript
// Mark an instant event with only a name
lynx.performance.profileMark('FetchStarted');

// Mark an instant event with custom arguments
lynx.performance.profileMark('FetchStarted', {
  args: { status: 'initiated' },
});

// Mark an instant event with a flow id
const flowId = lynx.performance.profileFlowId();
lynx.performance.profileMark('ActionCheckpoint', { flowId });

// Mark an instant event with both arguments and flow id
lynx.performance.profileMark('ProcessMidpoint', {
  args: { step: 'middle' },
  flowId,
});
```

### profileFlowId()

Generates a unique flow id for [flow events](https://perfetto.dev/docs/instrumentation/track-events#flows).

#### Syntax

```typescript
profileFlowId(): number;
```

#### Return Value

A unique flow id number.

### Examples

```typescript
const flowId = lynx.performance.profileFlowId();
lynx.performance.profileStart('UserAction', { flowId });
lynx.performance.profileMark('ActionCheckpoint', { flowId });
lynx.performance.profileEnd();
```

### isProfileRecording()

Checks if trace recording is currently active.

#### Syntax

```typescript
isProfileRecording(): boolean
```

#### Return Value

Return `true` if trace recording is currently active;

### Examples

```typescript
if (lynx.performance.isProfileRecording()) {
  lynx.performance.profileMark('RecordingIsActive');
}
```

## Compatibility

import { LegacyCompatTable } from '@lynx';

<LegacyCompatTable metadata="lynx-api/lynx/performance" />
